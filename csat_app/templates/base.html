{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}CSAT - Construction Safety Analytics Tool{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'csat_app/css/style.css' %}">
</head>
<body>
    <header>
        <div class="container" style="position: relative; display:flex; justify-content:flex-start; align-items:center; flex-wrap:wrap; min-height:60px; padding-right: 15px;">
            <!-- Navigation links (left side) -->
            <div style="display:flex; gap:20px; align-items:center; flex-wrap:wrap; font-size:0.95rem;">
                <a href="{% url 'risk_assessment' %}" style="color:white;">Risk Assessment</a>
                <span style="color:#aaa;">|</span>
                <a href="{% url 'analytics' %}" style="color:white;">Analytics Dashboard</a>

                {% if user.is_authenticated %}
                    <span style="color:#aaa;">|</span>
                    <a href="{% url 'my_plans' %}" style="color:white;">My Plans</a>
                    <span style="color:#aaa;">|</span>
                    <a href="{% url 'admin:index' %}" style="color:white;">Admin Console</a>
                    <span style="color:#aaa;">|</span>
                    <form method="post" action="{% url 'logout' %}" style="display:inline; margin:0;">
                        {% csrf_token %}
                        <button type="submit" style="background:none; border:none; color:white; cursor:pointer; padding:0; font:inherit; text-decoration:underline;">
                            Logout
                        </button>
                    </form>
                {% else %}
                    <a href="{% url 'admin:login' %}" style="color:white;">Login</a>
                {% endif %}
            </div>

            <!-- Session Info – pinned to far right edge -->
            <div style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); font-size:0.8rem; color:#ccc; background:#1a2b3c; padding:8px 12px; border-radius:6px; white-space:nowrap; text-align:left;">
                IP: {{ request.META.REMOTE_ADDR }}<br>
                Browser: {{ request.META.HTTP_USER_AGENT|truncatechars:60 }}<br>
                User: {% if user.is_authenticated %}{{ user.username }} (Authenticated){% else %}Anonymous{% endif %}
            </div>
        </div>
    </header>
    <div class="container">
        {% block content %}
        {% endblock %}
    </div>

    <footer>
        <div class="container">
            © 2025 Construction Safety Analytics Tool – Capstone Project
        </div>
    </footer>
</body>
</html>